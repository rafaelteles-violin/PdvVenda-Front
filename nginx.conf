# events {}
# http {
#     include /etc/nginx/mime.types;
#     server {
#         listen 8080;
#         server_name localhost;
#         root /usr/share/nginx/html;
#         index index.html;
#         location / {
#             try_files $uri $uri/ /index.html;
#         }
#     }
# }

events {}

http {
    include /etc/nginx/mime.types;

    server {
        listen 8080;
        server_name localhost;
        root /usr/share/nginx/html;
        index index.html;

        # Redireciona todas as rotas para index.html
        location / {
            try_files $uri $uri/ /index.html;
        }

        # Desativa cache para o index.html
        location = /index.html {
            add_header Cache-Control "no-cache, no-store, must-revalidate";
            add_header Pragma "no-cache";
            add_header Expires 0;
        }

        # Cache agressivo para arquivos com hash no nome
        location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
            add_header Cache-Control "public, max-age=31536000, immutable";
            try_files $uri =404;
        }
    }
}
